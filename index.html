<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      body {
        text-align: center;
      }
      ul {
        padding: 0px;
        display: inline-block;
      }
      li {
        list-style-type: none;
        margin: 10px;
      }
      li a {
        color: black;
      }
      li a:hover {
        color:blue;
      }

      .grp {
        border-style: solid;
        padding: 10px;
        display: block;
        width: 400px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <h1>ZOOM MEETING LINKS</h1>
    <input id="zoomLink_input" type="url" placeholder="Paste Your Link Here" required>
    <input id="zoomLink_name" type="text" placeholder="Enter Course Name" required>
    <button type="button" onclick="addLink()">Add</button>
    <hr>
    <!-- Display links -->
    <ul id="display">

    </ul>
    <hr>
    <input id = "name_remove" type="text" placeholder="Enter Course Name">
    <button type="button" onclick="removeLink()">Remove Link</button>

    <script type="text/javascript">
      if (localStorage.getItem("ZoomLinkArray") == null){
        var links_array = [];
      }
      else{
        var links_array = JSON.parse(localStorage.getItem("ZoomLinkArray"));
      }


      // adding link and name to the website
      function addLink(){
        var passCheck = true;
        var link = document.getElementById("zoomLink_input").value;
        var name = document.getElementById("zoomLink_name").value;
        // add the info into an object
        if (link != "" && name != "") {
          for (var i = 0; i < links_array.length; i++) {
            var nameCheck = links_array[i].Name;
            var linkCheck = links_array[i].Link;
            if (name == nameCheck){
              alert("This name already exist!")
              passCheck = false;
            }
            else if (link == linkCheck){
              alert("This link already exist!")
              passCheck = false;
            }
          }
          if (passCheck) {
            var link_obj =
            {
              "Name": '',
              "Link": ''
            };

            link_obj["Name"] = name;
            link_obj["Link"] = link;

            // push obj into an array
            links_array.push(link_obj);

            // adds array to local storage
            localStorage.setItem("ZoomLinkArray",JSON.stringify(links_array));
          }
        }
        else {
          alert("Please enter both Zoom Link and Course Name")
        }
        location.reload();
      }


      function displayLink() {
        for (var i = 0; i < links_array.length; i++) {
          var name = links_array[i].Name;
          var link = links_array[i].Link;

          var textNode = document.createTextNode(name);
          var textNode_remove = document.createTextNode("Remove Link");

          var div = document.createElement("div");
          div.setAttribute("class", "grp");
          var li = document.createElement("li");
          var a = document.createElement("a");
          a.setAttribute("href", link);
          a.appendChild(textNode);
          li.appendChild(a);
          div.appendChild(li);
          var display = document.getElementById("display").appendChild(div);
        }
      }


      function removeLink() {
        var found = false;
        var remove_name = document.getElementById("name_remove").value;
        for (var i = 0; i < links_array.length; i++) {
          var name = links_array[i].Name;
          if(name == remove_name) {
            found = true;
            if(prompt("Are you sure? Type yes to continue.") == "yes") {
              console.log(i);
              links_array.splice(i, 1);
              localStorage.setItem("ZoomLinkArray", JSON.stringify(links_array));
              location.reload();
            }
          }
        }
        if (found != true){
          alert("Name cannot be found.")
        }
      }


      displayLink();
    </script>
  </body>
</html>
